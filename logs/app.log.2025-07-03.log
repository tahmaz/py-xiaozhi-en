2025-07-03 00:22:21,701[root] - INFO - 日志系统已初始化，日志文件: /home/tahmaz/py-xiaozhi/logs/app.log - MainThread
2025-07-03 00:22:23,336[src.utils.config_manager] - INFO - MQTT服务器信息已更新 - MainThread
2025-07-03 00:22:23,337[src.utils.config_manager] - INFO - MQTT信息已成功更新 - MainThread
2025-07-03 00:22:23,337[src.utils.config_manager] - INFO - 检测到WebSocket配置信息 - MainThread
2025-07-03 00:22:23,337[src.utils.config_manager] - INFO - WebSocket URL已更新: wss://api.tenclass.net/xiaozhi/v1/ - MainThread
2025-07-03 00:22:23,338[src.utils.config_manager] - INFO - WebSocket Token已更新 - MainThread
2025-07-03 00:22:24,338[src.utils.device_activator] - INFO - 设备身份信息: 序列号: SN-F0088FE6-204ef6865a4f, 激活状态: 未激活 - MainThread
2025-07-03 00:22:24,339[src.utils.config_manager] - INFO - 检测到激活请求，开始设备激活流程 - MainThread
2025-07-03 00:22:24,340[src.utils.device_activator] - INFO - 激活提示: xiaozhi.me
960817 - MainThread
2025-07-03 00:22:24,340[src.utils.device_activator] - INFO - 验证码: 960817 - MainThread
2025-07-03 00:22:24,341[src.utils.common_utils] - INFO - 已从文本中提取验证码: 960817 - MainThread
2025-07-03 00:22:24,417[src.utils.common_utils] - INFO - 文本 "960817" 已复制到剪贴板 - MainThread
2025-07-03 00:22:25,535[src.utils.common_utils] - INFO - 已成功打开网页: https://xiaozhi.me/ - MainThread
2025-07-03 00:22:25,536[src.utils.common_utils] - INFO - 已启动非阻塞音频播放线程 - MainThread
2025-07-03 00:22:25,536[src.utils.device_activator] - INFO - 正在播放验证码语音提示 - MainThread
2025-07-03 00:22:25,537[src.utils.device_activator] - INFO - 尝试激活 (尝试 1/60)... - MainThread
2025-07-03 00:22:25,537[src.utils.common_utils] - INFO - 已使用espeak播放文本 - Thread-1 (audio_worker)
2025-07-03 00:22:41,316[src.utils.device_activator] - INFO - 尝试激活 (尝试 2/60)... - MainThread
2025-07-03 00:22:55,722[__main__] - INFO - 接收到中断信号，正在关闭... - MainThread
2025-07-03 00:22:55,723[src.application] - INFO - 正在关闭应用程序... - MainThread
2025-07-03 00:22:55,723[src.utils.config_manager] - ERROR - 初始化MQTT信息失败: 'Application' object has no attribute 'audio_codec' - MainThread
2025-07-03 00:22:55,724[__main__] - INFO - 应用程序已启动，按Ctrl+C退出 - MainThread
2025-07-03 00:22:55,725[src.application] - INFO - 启动应用程序，参数: {'mode': 'gui', 'protocol': 'websocket'} - MainThread
2025-07-03 00:22:55,726[src.application] - INFO - 主循环已启动 - Thread-2 (_main_loop)
2025-07-03 00:22:55,828[src.application] - INFO - 正在初始化应用程序组件... - Thread-3 (_run_event_loop)
2025-07-03 00:22:55,857[__main__] - ERROR - 程序发生错误: No module named 'cv2' - MainThread
Traceback (most recent call last):
  File "/home/tahmaz/py-xiaozhi/main.py", line 65, in main
    app.run(mode=args.mode, protocol=args.protocol)
  File "/home/tahmaz/py-xiaozhi/src/application.py", line 138, in run
    self._initialize_iot_devices()
  File "/home/tahmaz/py-xiaozhi/src/application.py", line 1220, in _initialize_iot_devices
    from src.iot.things.CameraVL.Camera import Camera
  File "/home/tahmaz/py-xiaozhi/src/iot/things/CameraVL/Camera.py", line 6, in <module>
    import cv2
ModuleNotFoundError: No module named 'cv2'
2025-07-03 00:23:12,049[root] - INFO - 日志系统已初始化，日志文件: /home/tahmaz/py-xiaozhi/logs/app.log - MainThread
2025-07-03 00:23:13,398[src.utils.config_manager] - INFO - MQTT服务器信息已更新 - MainThread
2025-07-03 00:23:13,399[src.utils.config_manager] - INFO - MQTT信息已成功更新 - MainThread
2025-07-03 00:23:13,400[src.utils.config_manager] - INFO - 检测到WebSocket配置信息 - MainThread
2025-07-03 00:23:13,401[src.utils.config_manager] - INFO - WebSocket URL已更新: wss://api.tenclass.net/xiaozhi/v1/ - MainThread
2025-07-03 00:23:13,403[src.utils.config_manager] - INFO - WebSocket Token已更新 - MainThread
2025-07-03 00:23:14,404[src.utils.device_activator] - INFO - 设备身份信息: 序列号: SN-F0088FE6-204ef6865a4f, 激活状态: 未激活 - MainThread
2025-07-03 00:23:14,404[src.utils.config_manager] - INFO - 检测到激活请求，开始设备激活流程 - MainThread
2025-07-03 00:23:14,405[src.utils.device_activator] - INFO - 激活提示: xiaozhi.me
960817 - MainThread
2025-07-03 00:23:14,406[src.utils.device_activator] - INFO - 验证码: 960817 - MainThread
2025-07-03 00:23:14,406[src.utils.common_utils] - INFO - 已从文本中提取验证码: 960817 - MainThread
2025-07-03 00:23:14,454[src.utils.common_utils] - INFO - 文本 "960817" 已复制到剪贴板 - MainThread
2025-07-03 00:23:15,292[src.utils.common_utils] - INFO - 已成功打开网页: https://xiaozhi.me/ - MainThread
2025-07-03 00:23:15,293[src.utils.common_utils] - INFO - 已启动非阻塞音频播放线程 - MainThread
2025-07-03 00:23:15,294[src.utils.device_activator] - INFO - 正在播放验证码语音提示 - MainThread
2025-07-03 00:23:15,295[src.utils.device_activator] - INFO - 尝试激活 (尝试 1/60)... - MainThread
2025-07-03 00:23:15,296[src.utils.common_utils] - INFO - 已使用espeak播放文本 - Thread-1 (audio_worker)
2025-07-03 00:23:31,006[src.utils.device_activator] - INFO - 尝试激活 (尝试 2/60)... - MainThread
2025-07-03 00:23:41,367[__main__] - INFO - 接收到中断信号，正在关闭... - MainThread
2025-07-03 00:23:41,368[src.application] - INFO - 正在关闭应用程序... - MainThread
2025-07-03 00:23:41,368[src.utils.device_activator] - WARNING - 激活过程中发生错误: 'Application' object has no attribute 'audio_codec'，重试中... - MainThread
2025-07-03 00:23:46,369[src.utils.device_activator] - INFO - 尝试激活 (尝试 3/60)... - MainThread
2025-07-03 00:23:51,305[__main__] - INFO - 接收到中断信号，正在关闭... - MainThread
2025-07-03 00:23:51,306[src.application] - INFO - 正在关闭应用程序... - MainThread
2025-07-03 00:23:51,306[src.utils.device_activator] - WARNING - 激活过程中发生错误: 'Application' object has no attribute 'audio_codec'，重试中... - MainThread
2025-07-03 00:23:53,246[__main__] - INFO - 接收到中断信号，正在关闭... - MainThread
2025-07-03 00:23:53,246[src.application] - INFO - 正在关闭应用程序... - MainThread
2025-07-03 00:23:53,246[src.utils.config_manager] - ERROR - 初始化MQTT信息失败: 'Application' object has no attribute 'audio_codec' - MainThread
2025-07-03 00:23:53,246[__main__] - INFO - 应用程序已启动，按Ctrl+C退出 - MainThread
2025-07-03 00:23:53,247[src.application] - INFO - 启动应用程序，参数: {'mode': 'gui', 'protocol': 'websocket'} - MainThread
2025-07-03 00:23:53,247[src.application] - INFO - 主循环已启动 - Thread-2 (_main_loop)
2025-07-03 00:23:53,348[src.application] - INFO - 正在初始化应用程序组件... - Thread-3 (_run_event_loop)
2025-07-03 00:23:53,353[__main__] - ERROR - 程序发生错误: No module named 'cv2' - MainThread
Traceback (most recent call last):
  File "/home/tahmaz/py-xiaozhi/main.py", line 65, in main
    app.run(mode=args.mode, protocol=args.protocol)
  File "/home/tahmaz/py-xiaozhi/src/application.py", line 138, in run
    self._initialize_iot_devices()
  File "/home/tahmaz/py-xiaozhi/src/application.py", line 1220, in _initialize_iot_devices
    from src.iot.things.CameraVL.Camera import Camera
  File "/home/tahmaz/py-xiaozhi/src/iot/things/CameraVL/Camera.py", line 6, in <module>
    import cv2
ModuleNotFoundError: No module named 'cv2'
2025-07-03 00:28:30,480[root] - INFO - 日志系统已初始化，日志文件: /home/tahmaz/py-xiaozhi/logs/app.log - MainThread
2025-07-03 00:28:31,696[src.utils.config_manager] - INFO - MQTT服务器信息已更新 - MainThread
2025-07-03 00:28:31,698[src.utils.config_manager] - INFO - MQTT信息已成功更新 - MainThread
2025-07-03 00:28:31,699[src.utils.config_manager] - INFO - 检测到WebSocket配置信息 - MainThread
2025-07-03 00:28:31,700[src.utils.config_manager] - INFO - WebSocket URL已更新: wss://api.tenclass.net/xiaozhi/v1/ - MainThread
2025-07-03 00:28:31,702[src.utils.config_manager] - INFO - WebSocket Token已更新 - MainThread
2025-07-03 00:28:32,703[src.utils.device_activator] - INFO - 设备身份信息: 序列号: SN-F0088FE6-204ef6865a4f, 激活状态: 未激活 - MainThread
2025-07-03 00:28:32,704[src.utils.config_manager] - INFO - 检测到激活请求，开始设备激活流程 - MainThread
2025-07-03 00:28:32,705[src.utils.device_activator] - INFO - 激活提示: xiaozhi.me
960817 - MainThread
2025-07-03 00:28:32,705[src.utils.device_activator] - INFO - 验证码: 960817 - MainThread
2025-07-03 00:28:32,707[src.utils.common_utils] - INFO - 已从文本中提取验证码: 960817 - MainThread
2025-07-03 00:28:32,758[src.utils.common_utils] - INFO - 文本 "960817" 已复制到剪贴板 - MainThread
2025-07-03 00:28:33,649[src.utils.common_utils] - INFO - 已成功打开网页: https://xiaozhi.me/ - MainThread
2025-07-03 00:28:33,650[src.utils.common_utils] - INFO - 已启动非阻塞音频播放线程 - MainThread
2025-07-03 00:28:33,650[src.utils.device_activator] - INFO - 正在播放验证码语音提示 - MainThread
2025-07-03 00:28:33,651[src.utils.device_activator] - INFO - 尝试激活 (尝试 1/60)... - MainThread
2025-07-03 00:28:33,651[src.utils.common_utils] - INFO - 已使用espeak播放文本 - Thread-1 (audio_worker)
2025-07-03 00:28:49,638[src.utils.device_activator] - INFO - 尝试激活 (尝试 2/60)... - MainThread
2025-07-03 00:29:05,589[src.utils.device_activator] - INFO - 尝试激活 (尝试 3/60)... - MainThread
2025-07-03 00:29:08,866[__main__] - INFO - 接收到中断信号，正在关闭... - MainThread
2025-07-03 00:29:08,867[src.application] - INFO - 正在关闭应用程序... - MainThread
2025-07-03 00:29:08,867[src.utils.device_activator] - WARNING - 激活过程中发生错误: 'Application' object has no attribute 'audio_codec'，重试中... - MainThread
2025-07-03 00:29:13,868[src.utils.device_activator] - INFO - 尝试激活 (尝试 4/60)... - MainThread
2025-07-03 00:29:17,709[__main__] - INFO - 接收到中断信号，正在关闭... - MainThread
2025-07-03 00:29:17,710[src.application] - INFO - 正在关闭应用程序... - MainThread
2025-07-03 00:29:17,711[src.utils.device_activator] - WARNING - 激活过程中发生错误: 'Application' object has no attribute 'audio_codec'，重试中... - MainThread
2025-07-03 00:29:19,689[__main__] - INFO - 接收到中断信号，正在关闭... - MainThread
2025-07-03 00:29:19,690[src.application] - INFO - 正在关闭应用程序... - MainThread
2025-07-03 00:29:19,690[src.utils.config_manager] - ERROR - 初始化MQTT信息失败: 'Application' object has no attribute 'audio_codec' - MainThread
2025-07-03 00:29:19,691[__main__] - INFO - 应用程序已启动，按Ctrl+C退出 - MainThread
2025-07-03 00:29:19,692[src.application] - INFO - 启动应用程序，参数: {'mode': 'gui', 'protocol': 'websocket'} - MainThread
2025-07-03 00:29:19,693[src.application] - INFO - 主循环已启动 - Thread-2 (_main_loop)
2025-07-03 00:29:19,795[src.application] - INFO - 正在初始化应用程序组件... - Thread-3 (_run_event_loop)
2025-07-03 00:29:19,808[__main__] - ERROR - 程序发生错误: No module named 'cv2' - MainThread
Traceback (most recent call last):
  File "/home/tahmaz/py-xiaozhi/main.py", line 65, in main
    app.run(mode=args.mode, protocol=args.protocol)
  File "/home/tahmaz/py-xiaozhi/src/application.py", line 138, in run
    self._initialize_iot_devices()
  File "/home/tahmaz/py-xiaozhi/src/application.py", line 1220, in _initialize_iot_devices
    from src.iot.things.CameraVL.Camera import Camera
  File "/home/tahmaz/py-xiaozhi/src/iot/things/CameraVL/Camera.py", line 6, in <module>
    import cv2
ModuleNotFoundError: No module named 'cv2'
2025-07-03 00:31:28,076[root] - INFO - 日志系统已初始化，日志文件: /home/tahmaz/py-xiaozhi/logs/app.log - MainThread
2025-07-03 00:31:29,533[src.utils.config_manager] - INFO - MQTT服务器信息已更新 - MainThread
2025-07-03 00:31:29,535[src.utils.config_manager] - INFO - MQTT信息已成功更新 - MainThread
2025-07-03 00:31:29,535[src.utils.config_manager] - INFO - 检测到WebSocket配置信息 - MainThread
2025-07-03 00:31:29,537[src.utils.config_manager] - INFO - WebSocket URL已更新: wss://api.tenclass.net/xiaozhi/v1/ - MainThread
2025-07-03 00:31:29,538[src.utils.config_manager] - INFO - WebSocket Token已更新 - MainThread
2025-07-03 00:31:30,539[src.utils.device_activator] - INFO - 设备身份信息: 序列号: SN-F0088FE6-204ef6865a4f, 激活状态: 未激活 - MainThread
2025-07-03 00:31:30,540[src.utils.config_manager] - INFO - 检测到激活请求，开始设备激活流程 - MainThread
2025-07-03 00:31:30,541[src.utils.device_activator] - INFO - 激活提示: xiaozhi.me
960817 - MainThread
2025-07-03 00:31:30,541[src.utils.device_activator] - INFO - 验证码: 960817 - MainThread
2025-07-03 00:31:30,542[src.utils.common_utils] - INFO - 已从文本中提取验证码: 960817 - MainThread
2025-07-03 00:31:30,599[src.utils.common_utils] - INFO - 文本 "960817" 已复制到剪贴板 - MainThread
2025-07-03 00:31:31,563[src.utils.common_utils] - INFO - 已成功打开网页: https://xiaozhi.me/ - MainThread
2025-07-03 00:31:31,564[src.utils.common_utils] - INFO - 已启动非阻塞音频播放线程 - MainThread
2025-07-03 00:31:31,564[src.utils.common_utils] - INFO - 已使用espeak播放文本 - Thread-1 (audio_worker)
2025-07-03 00:31:31,565[src.utils.device_activator] - INFO - 正在播放验证码语音提示 - MainThread
2025-07-03 00:31:31,566[src.utils.device_activator] - INFO - 尝试激活 (尝试 1/60)... - MainThread
2025-07-03 00:31:46,457[__main__] - INFO - 接收到中断信号，正在关闭... - MainThread
2025-07-03 00:31:46,458[src.application] - INFO - 正在关闭应用程序... - MainThread
2025-07-03 00:31:46,458[src.utils.config_manager] - ERROR - 初始化MQTT信息失败: 'Application' object has no attribute 'audio_codec' - MainThread
2025-07-03 00:31:46,459[__main__] - INFO - 应用程序已启动，按Ctrl+C退出 - MainThread
2025-07-03 00:31:46,460[src.application] - INFO - 启动应用程序，参数: {'mode': 'gui', 'protocol': 'websocket'} - MainThread
2025-07-03 00:31:46,461[src.application] - INFO - 主循环已启动 - Thread-2 (_main_loop)
2025-07-03 00:31:46,563[src.application] - INFO - 正在初始化应用程序组件... - Thread-3 (_run_event_loop)
2025-07-03 00:31:47,005[src.audio_codecs.audio_codec] - INFO - 音频设备和编解码器初始化成功 - Thread-3 (_run_event_loop)
2025-07-03 00:31:47,005[src.application] - INFO - 音频编解码器初始化成功 - Thread-3 (_run_event_loop)
2025-07-03 00:31:47,008[src.application] - INFO - 系统音量控制未启用，将使用模拟音量控制 - Thread-3 (_run_event_loop)
2025-07-03 00:31:47,008[src.application] - INFO - 唤醒词功能已在配置中禁用，跳过初始化 - Thread-3 (_run_event_loop)
2025-07-03 00:31:47,008[src.application] - INFO - 应用程序组件初始化完成 - Thread-3 (_run_event_loop)
2025-07-03 00:31:47,420[src.iot.things.music_player] - INFO - 创建音乐缓存目录: /home/tahmaz/py-xiaozhi/cache/music - MainThread
2025-07-03 00:31:47,420[src.iot.things.music_player] - INFO - 音乐播放器初始化完成 - MainThread
2025-07-03 00:31:47,461[src.application] - INFO - 已添加倒计时器设备,用于计时执行命令用 - MainThread
2025-07-03 00:31:47,461[src.application] - INFO - 物联网设备初始化完成 - MainThread
2025-07-03 00:31:47,471[GuiDisplay] - INFO - 音量控制器初始化成功 - MainThread
2025-07-03 00:31:47,485[GuiDisplay] - INFO - 读取到系统音量: 73% - MainThread
2025-07-03 00:31:47,685[Display] - INFO - 已添加快捷键提示标签 - MainThread
2025-07-03 00:31:47,685[Display] - INFO - 使用 stackedWidget 的第2个页面作为 iot_card: <PyQt5.QtWidgets.QWidget object at 0x74ba06f2c700> - MainThread
2025-07-03 00:31:47,700[Display] - INFO - 系统托盘图标已初始化 - MainThread
2025-07-03 00:31:47,701[Display] - INFO - 键盘监听器初始化成功 - MainThread
2025-07-03 00:31:47,705[Display] - INFO - 开始启动GUI主循环 - MainThread
2025-07-03 00:31:47,894[__main__] - INFO - 开始Qt事件循环 - MainThread
2025-07-03 00:31:47,895[Display] - INFO - 设置表情GIF: /home/tahmaz/py-xiaozhi/assets/emojis/neutral.gif - MainThread
2025-07-03 00:31:47,895[Display] - INFO - 加载GIF文件: /home/tahmaz/py-xiaozhi/assets/emojis/neutral.gif - MainThread
2025-07-03 00:32:04,550[src.application] - INFO - 音频通道已打开 - Thread-3 (_run_event_loop)
2025-07-03 00:32:04,552[src.application] - INFO - 物联网设备状态已更新(完整) - Thread-3 (_run_event_loop)
2025-07-03 00:32:04,553[src.protocols.websocket_protocol] - INFO - 成功处理服务器 hello 消息 - Thread-3 (_run_event_loop)
2025-07-03 00:32:04,555[src.protocols.websocket_protocol] - INFO - 已连接到WebSocket服务器 - Thread-3 (_run_event_loop)
2025-07-03 00:32:04,663[src.application] - INFO - 已启动输入事件触发线程 - Thread-2 (_main_loop)
2025-07-03 00:32:04,663[src.application] - INFO - 已启动输出事件触发线程 - Thread-2 (_main_loop)
2025-07-03 00:32:04,663[src.application] - INFO - 音频流已启动 - Thread-2 (_main_loop)
2025-07-03 00:32:04,858[src.application] - INFO - >> hi - Thread-3 (_run_event_loop)
2025-07-03 00:32:04,960[src.application] - INFO - << 请登录到控制面板添加设备，输入验证码：960817。 - Thread-3 (_run_event_loop)
2025-07-03 00:32:04,967[src.utils.common_utils] - INFO - 已从文本中提取验证码: 960817 - Thread-2 (_main_loop)
2025-07-03 00:32:04,971[src.utils.common_utils] - INFO - 文本 "960817" 已复制到剪贴板 - Thread-2 (_main_loop)
2025-07-03 00:32:05,789[src.utils.common_utils] - INFO - 已成功打开网页: https://xiaozhi.me/ - Thread-2 (_main_loop)
2025-07-03 00:32:11,130[src.audio_codecs.audio_codec] - INFO - 音频输入流重新初始化成功 - Thread-2 (_main_loop)
2025-07-03 00:32:12,737[Display] - WARNING - Home Assistant URL或Token未配置，无法更新设备状态 - MainThread
2025-07-03 00:32:13,688[Display] - WARNING - Home Assistant URL或Token未配置，无法更新设备状态 - MainThread
2025-07-03 00:32:14,662[Display] - WARNING - Home Assistant URL或Token未配置，无法更新设备状态 - MainThread
2025-07-03 00:32:15,663[Display] - WARNING - Home Assistant URL或Token未配置，无法更新设备状态 - MainThread
2025-07-03 00:32:44,963[__main__] - INFO - 接收到中断信号，正在关闭... - MainThread
2025-07-03 00:32:44,964[src.application] - INFO - 正在关闭应用程序... - MainThread
2025-07-03 00:32:44,964[src.audio_codecs.audio_codec] - INFO - 开始关闭音频编解码器... - MainThread
2025-07-03 00:32:44,978[src.audio_codecs.audio_codec] - INFO - 音频资源已完全释放 - MainThread
2025-07-03 00:32:44,978[src.application] - INFO - 应用程序已关闭 - MainThread
